function onDeviceReady(){$(window).width()>=768?screen.lockOrientation("landscape"):screen.lockOrientation("portrait")}$.fn.onTap=function(e){var t,r;return this.bind("touchstart",function(){t=setTimeout(function(){r=!0},130)}).bind("touchend",function(){r||e(),r=!1,clearTimeout(t)}),this},document.addEventListener("deviceready",onDeviceReady,!1),$(document).ready(function(){function e(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function t(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function r(e,t){return Math.floor(Math.random()*(t-e))+e}function s(){var e;if(console.log(h),"all"==h)return sortedCards.easy.length&&sortedCards.hard.length?Math.random()<=.2?(l="easy",c=r(0,sortedCards.easy.length-1),e=sortedCards.easy[c]):(l="hard",c=r(0,sortedCards.hard.length-1),e=sortedCards.hard[c]):sortedCards.easy.length?(l="easy",c=r(0,sortedCards.easy.length-1),e=sortedCards.easy[c]):(l="hard",c=r(0,sortedCards.hard.length-1),e=sortedCards.hard[c]),u.push({deck:l,currentCard:c}),e;do sortedCards.easy.length&&sortedCards.hard.length?Math.random()<=.2?(l="easy",c=r(0,sortedCards.easy.length-1),e=sortedCards.easy[c]):(l="hard",c=r(0,sortedCards.hard.length-1),e=sortedCards.hard[c]):sortedCards.easy.length?(l="easy",c=r(0,sortedCards.easy.length-1),e=sortedCards.easy[c]):(l="hard",c=r(0,sortedCards.hard.length-1),e=sortedCards.hard[c]);while(e.type!=h);return u.push({deck:l,currentCard:c}),e}function a(e,t){var r='<div class="flipper animated cardIn'+e+' fullscreen-img" style="display:none"><div class="front"><div class="front-clip">	<img src="card-images/'+escape(t.image)+'"><div class="question-box">'+t.question+'</div></div></div><div class="back" style="background-image:url(\'card-images/'+escape(t.image)+'\');"><p class="back-question">'+t.question+"</p><p>"+t.answer+"</p><p>"+t.fun+"</p></div></div>";$(".flip-container").removeClass("hover"),$(r).appendTo(".flip-container").show().one("animationend webkitAnimationEnd",function(){$(this).removeClass("animated cardIn"+e)})}function n(){sortedCards[l][c].difficulty?$("#btn-"+sortedCards[l][c].difficulty).addClass("difficulty-marked").siblings().removeClass("difficulty-marked"):$("#btn-hard,#btn-easy").removeClass("difficulty-marked"),u.length>1?$("#prev-btn").fadeIn():$("#prev-btn").fadeOut()}function d(){$(".flipper").addClass("animated cardOutRight").one("animationend webkitAnimationEnd",function(){$(this).remove()});var e=u.length-2,t=u[e];a("Right",sortedCards[t.deck][t.currentCard]),c=t.currentCard,l=t.deck,u.splice(u.length-1,1),n()}function i(){$(".flipper").addClass("animated cardOutLeft").one("animationend webkitAnimationEnd",function(){$(this).remove()}),a("Left",s()),n()}function o(){$.merge(sortedCards.hard,sortedCards.easy),sortedCards.easy.splice(0,sortedCards.easy.length),$.each(sortedCards.hard,function(){this.difficulty=""}),localStorage.setItem("navyCards",JSON.stringify(sortedCards)),i()}zE(function(){zE.hide(),$(".version").append($('<a href="#" onclick="zE.activate({hideOnClose: true});" style="color:white;text-decoration:underline;margin-left:10px;">Feedback</a>'))}),localStorage.newFlashcardUser||($("#disclaimer").modal(),localStorage.setItem("newFlashcardUser","true")),$("body").on("click","#fullscreen:not(.isFullScreen)",function(){e(document.documentElement),$(this).addClass("isFullScreen")}),$("body").on("click","#fullscreen.isFullScreen",function(){t(),$(this).removeClass("isFullScreen")});var c,l,u=[],h="all";localStorage.navyCards&&(sortedCards=$.parseJSON(localStorage.navyCards));var f=[];$.each(sortedCards.hard,function(){-1==f.indexOf(this.type)&&f.push(this.type)}),f.sort(),$.each(f,function(){var e=$('<option value="'+this+'">'+this+"</option>");$("#typeSelect").append(e)}),$("#typeSelect").change(function(){h=$(this).val(),console.log(h,$(this).val()),i()}),$("#next-btn").click(function(){return i(),!1}),$("#prev-btn").click(function(){return d(),!1}),$("#flip-container").swipe({swipeLeft:function(){i()},swipeRight:function(){u.length>1&&d()}}),$("#flip-container").click(function(){$("#flip-container").toggleClass("hover")}),$("#btn-hard:not(.difficulty-marked)").click(function(){return sortedCards[l][c].difficulty="hard",sortedCards.hard.push(sortedCards[l][c]),sortedCards[l].splice(c,1),l="hard",c=sortedCards[l].length-1,u[u.length-1].deck=l,u[u.length-1].currentCard=c,localStorage.setItem("navyCards",JSON.stringify(sortedCards)),$(this).addClass("difficulty-marked").siblings().removeClass("difficulty-marked"),!1}),$("#btn-easy:not(.difficulty-marked)").click(function(){return sortedCards[l][c].difficulty="easy",sortedCards.easy.push(sortedCards[l][c]),sortedCards[l].splice(c,1),l="easy",c=sortedCards[l].length-1,u[u.length-1].deck=l,u[u.length-1].currentCard=c,localStorage.setItem("navyCards",JSON.stringify(sortedCards)),$(this).addClass("difficulty-marked").siblings().removeClass("difficulty-marked"),!1}),a("Left",s()),n(),$("#statBtn").click(function(){var e=0,t=0,r=0,s=[];s=sortedCards.hard.concat(sortedCards.easy),$.each(s,function(){this.difficulty&&("hard"==this.difficulty?r++:t++)}),e=s.length-(t+r),$("#stat-new").text(e),$("#stat-easy").text(t),$("#stat-hard").text(r)}),$("#btnReset").click(function(){o()})});