$.fn.onTap=function(e){var t,r;return this.bind("touchstart",function(){t=setTimeout(function(){r=!0},130)}).bind("touchend",function(){r||e(),r=!1,clearTimeout(t)}),this},$(document).ready(function(){function e(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function t(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function r(e,t){return Math.floor(Math.random()*(t-e))+e}function a(){var e;if(console.log(f),"all"==f)return sortedCards.easy.length&&sortedCards.hard.length?Math.random()<=.2?(u="easy",c=r(0,sortedCards.easy.length-1),e=sortedCards.easy[c]):(u="hard",c=r(0,sortedCards.hard.length-1),e=sortedCards.hard[c]):sortedCards.easy.length?(u="easy",c=r(0,sortedCards.easy.length-1),e=sortedCards.easy[c]):(u="hard",c=r(0,sortedCards.hard.length-1),e=sortedCards.hard[c]),h.push({deck:u,currentCard:c}),e;do sortedCards.easy.length&&sortedCards.hard.length?Math.random()<=.2?(u="easy",c=r(0,sortedCards.easy.length-1),e=sortedCards.easy[c]):(u="hard",c=r(0,sortedCards.hard.length-1),e=sortedCards.hard[c]):sortedCards.easy.length?(u="easy",c=r(0,sortedCards.easy.length-1),e=sortedCards.easy[c]):(u="hard",c=r(0,sortedCards.hard.length-1),e=sortedCards.hard[c]);while(e.type!=f);return h.push({deck:u,currentCard:c}),e}function s(e,t){var r='<div class="flipper animated cardIn'+e+' fullscreen-img" style="display:none"><div class="front"><div class="front-clip">	<img src="card-images/'+escape(t.image)+'"><div class="question-box">'+t.question+'</div></div></div><div class="back" style="background-image:url(\'card-images/'+escape(t.image)+'\');"><p class="back-question">'+t.question+"</p><p>"+t.answer+"</p><p>"+t.fun+"</p></div></div>";$(".flip-container").removeClass("hover"),$(r).appendTo(".flip-container").show().one("animationend webkitAnimationEnd",function(){$(this).removeClass("animated cardIn"+e)})}function n(){sortedCards[u][c].difficulty?$("#btn-"+sortedCards[u][c].difficulty).addClass("difficulty-marked").siblings().removeClass("difficulty-marked"):$("#btn-hard,#btn-easy").removeClass("difficulty-marked"),h.length>1?$("#prev-btn").fadeIn():$("#prev-btn").fadeOut()}function d(){$(".flipper").addClass("animated cardOutRight").one("animationend webkitAnimationEnd",function(){$(this).remove()});var e=h.length-2,t=h[e];s("Right",sortedCards[t.deck][t.currentCard]),c=t.currentCard,u=t.deck,h.splice(h.length-1,1),n()}function i(){$(".flipper").addClass("animated cardOutLeft").one("animationend webkitAnimationEnd",function(){$(this).remove()}),s("Left",a()),n()}function o(){$.merge(sortedCards.hard,sortedCards.easy),sortedCards.easy.splice(0,sortedCards.easy.length),$.each(sortedCards.hard,function(){this.difficulty=""}),localStorage.setItem("navyCards",JSON.stringify(sortedCards)),i()}if($(window).width()>=768)try{screen.lockOrientation("landscape")}catch(l){alert("lock orientation failed to landscape")}else try{screen.lockOrientation("portrait")}catch(l){alert("lock orientation failed to portrait")}zE(function(){zE.hide(),$(".version").append($('<a href="#" onclick="zE.activate({hideOnClose: true});" style="color:white;text-decoration:underline;margin-left:10px;">Feedback</a>'))}),localStorage.newFlashcardUser||($("#disclaimer").modal(),localStorage.setItem("newFlashcardUser","true")),$("body").on("click","#fullscreen:not(.isFullScreen)",function(){e(document.documentElement),$(this).addClass("isFullScreen")}),$("body").on("click","#fullscreen.isFullScreen",function(){t(),$(this).removeClass("isFullScreen")});var c,u,h=[],f="all";localStorage.navyCards&&(sortedCards=$.parseJSON(localStorage.navyCards));var C=[];$.each(sortedCards.hard,function(){-1==C.indexOf(this.type)&&C.push(this.type)}),C.sort(),$.each(C,function(){var e=$('<option value="'+this+'">'+this+"</option>");$("#typeSelect").append(e)}),$("#typeSelect").change(function(){f=$(this).val(),console.log(f,$(this).val()),i()}),$("#next-btn").click(function(){return i(),!1}),$("#prev-btn").click(function(){return d(),!1}),$("#flip-container").swipe({swipeLeft:function(){i()},swipeRight:function(){h.length>1&&d()}}),$("#flip-container").click(function(){$("#flip-container").toggleClass("hover")}),$("#btn-hard:not(.difficulty-marked)").click(function(){return sortedCards[u][c].difficulty="hard",sortedCards.hard.push(sortedCards[u][c]),sortedCards[u].splice(c,1),u="hard",c=sortedCards[u].length-1,h[h.length-1].deck=u,h[h.length-1].currentCard=c,localStorage.setItem("navyCards",JSON.stringify(sortedCards)),$(this).addClass("difficulty-marked").siblings().removeClass("difficulty-marked"),!1}),$("#btn-easy:not(.difficulty-marked)").click(function(){return sortedCards[u][c].difficulty="easy",sortedCards.easy.push(sortedCards[u][c]),sortedCards[u].splice(c,1),u="easy",c=sortedCards[u].length-1,h[h.length-1].deck=u,h[h.length-1].currentCard=c,localStorage.setItem("navyCards",JSON.stringify(sortedCards)),$(this).addClass("difficulty-marked").siblings().removeClass("difficulty-marked"),!1}),s("Left",a()),n(),$("#statBtn").click(function(){var e=0,t=0,r=0,a=[];a=sortedCards.hard.concat(sortedCards.easy),$.each(a,function(){this.difficulty&&("hard"==this.difficulty?r++:t++)}),e=a.length-(t+r),$("#stat-new").text(e),$("#stat-easy").text(t),$("#stat-hard").text(r)}),$("#btnReset").click(function(){o()})});